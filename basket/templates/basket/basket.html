{% extends "base.html" %}
{% load static %}
{% block title %}
  Retro Replay | Your Basket
{% endblock title %}
{% block content %}
  <h2>This is the basket summary page!</h2>
  <h3>Basket: {{ basket }}</h3>
  <hr />
  <!-- Basket item(s) -->
  <!-- START individual basket item loop -->
  {% for item in basket %}
    {% with product=item.product %}
      <div class="basket-single-item" data-removal-index="{{ product.pk }}">
        <p>Product: {{ product }}</p>
        <p>Price: £{{ product.price }}</p>
        {% csrf_token %}
        <button type="button"
                class="btn btn-outline-danger remove-from-basket"
                id="remove-from-basket"
                data-removal-index="{{ product.pk }}"
                data-url="{% url 'basket:remove_from_basket' %}">Remove</button>
        <hr />
      </div>
    {% endwith %}
  {% endfor %}
  <!-- END individual basket item loop -->
  <!-- END Basket item(s) -->
  <!-- Basket summary -->
  <h4>
    Basket subtotal: £<span id="basket-subtotal">{{ basket.get_subtotal }}</span>
  </h4>
  <!-- END Basket summary -->
  <a href="{% url 'payments:checkout' %}" class="btn btn-success">Checkout</a>
{% endblock content %}
{% block additional_scripts %}
  <script src="{% static 'js/remove-from-basket.js' %}"></script>
{% endblock additional_scripts %}
