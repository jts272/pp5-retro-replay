{% extends "base.html" %}
{% load static %}
{% block title %}
  Retro Replay | Checkout
{% endblock title %}
{% block content %}
  <div>
    <h3>Checkout page</h3>
    <h4>Items to purchase:</h4>
    {% for item in basket %}
      {% with product=item.product %}
        <div class="basket-single-item">
          <p>Product: {{ product }}</p>
          <p>Price: Â£{{ product.price }}</p>
          <hr />
        </div>
      {% endwith %}
    {% endfor %}
  </div>
  <div>
    <form id="address-form">
      <h3>Address</h3>
      <div id="address-element">
        <!-- Elements will create form elements here -->
      </div>
      <button type="submit" class="btn btn-primary" data-stripe-client-secret={{ client_secret }}>Pay
      </button>
    </form>
  </div>
{% endblock content %}
{% block additional_scripts %}
  <script>const CSRF_TOKEN = {{ csrf_token }}</script>
  <script src="https://js.stripe.com/v3/"></script>
  <script src="{% static 'js/checkout.js' %}"></script>
{% endblock additional_scripts %}
